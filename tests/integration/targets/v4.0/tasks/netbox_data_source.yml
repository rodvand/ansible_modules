---
##
##
### NETBOX_DATA_SOURCE
##
##
- name: "Data source 1: Necessary info creation"
  netbox.netbox.netbox_data_source:
    netbox_url: http://localhost:32768
    netbox_token: "0123456789abcdef0123456789abcdef01234567"    
    data:
      name: Data Source 1
      type: local
      source_url: file:///opt/scripts
    state: present
  register: test_one

- name: "Data Source 1: ASSERT - Necessary info creation"
  ansible.builtin.assert:
    that:
      - test_one is changed
      - test_one['diff']['before']['state'] == "absent"
      - test_one['diff']['after']['state'] == "present"
      - test_one['data_source']['name'] == "Data Source 1"
      - test_one['data_source']['type'] == "local"
      - test_one['msg'] == "data_source Data Source 1 created"